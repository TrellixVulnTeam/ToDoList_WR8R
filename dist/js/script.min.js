const addBtn=document.getElementById("abbTask"),taskValue=document.getElementById("task__value"),taskList=document.querySelector(".task__list"),finishedTask=document.querySelector(".task__finished");function createdNewLiHtml(e,t){let a=document.createElement("li"),s=document.createElement("button");t?(s.className="btn__task checkbox",s.innerHTML='<img src="img/check.png" alt=""></img>',s.style.backgroundColor="lightgreen"):(s.className="btn__task checkbox",s.innerHTML='<img src="img/check.png" alt=""></img>');let i=document.createElement("label");i.innerText=e,i.classList.add("task__todo");let n=document.createElement("input");n.type="text";let l=document.createElement("button");l.classList.add("btn__task"),l.classList.add("edit"),l.innerHTML=' <img src="img/edit.png" alt="">';let d=document.createElement("button");return d.classList.add("btn__task"),d.classList.add("delete"),d.innerHTML=' <img src="img/delete.png" alt="">',taskList.appendChild(a),a.appendChild(s),a.appendChild(i),a.appendChild(n),a.appendChild(l),a.appendChild(d),a}function addTask(){if(taskValue.value){bindTasks(createdNewLiHtml(taskValue.value,!1),finishTask),taskValue.value=""}save()}function deleteTask(){let e=this.parentNode;e.parentNode.removeChild(e),save()}function editTask(){let e=this,t=this.parentNode,a=t.querySelector("label"),s=t.querySelector("input[type=text]");var i=t.classList.contains("editMode");console.log(i),i?(a.innerText=s.value,e.classList.add("btn__task"),e.classList.add("edit"),e.innerHTML=' <img src="img/edit.png" alt="">',save()):(s.value=a.innerText,e.classList.add("btn__task"),e.classList.add("edit"),e.innerHTML=' <img src="img/save.png" alt="">'),t.classList.toggle("editMode")}function finishTask(){let e=this.parentNode;e.parentNode;this.style.backgroundColor="lightgreen",finishedTask.appendChild(e),bindTasks(e,unfinishedTask),save()}function unfinishedTask(){let e=this.parentNode;this.style.backgroundColor="transparent",taskList.appendChild(e),bindTasks(e,finishTask),save()}function bindTasks(e,t){let a=e.querySelector("button.checkbox"),s=e.querySelector("button.edit"),i=e.querySelector("button.delete");a.onclick=t,s.onclick=editTask,i.onclick=deleteTask}function save(){for(var e=[],t=0;t<taskList.children.length;t++)e.push(taskList.children[t].getElementsByTagName("label")[0].innerText);var a=[];for(t=0;t<finishedTask.children.length;t++)a.push(finishedTask.children[t].getElementsByTagName("label")[0].innerText);localStorage.removeItem("todo"),localStorage.setItem("todo",JSON.stringify({taskList:e,finishedTask:a}))}function load(){return JSON.parse(localStorage.getItem("todo"))}addBtn.onclick=addTask;for(var data=load(),i=0;i<data.taskList.length;i++){var listItem=createdNewLiHtml(data.taskList[i],!1);taskList.appendChild(listItem),bindTasks(listItem,finishTask)}for(i=0;i<data.finishedTask.length;i++){listItem=createdNewLiHtml(data.finishedTask[i],!0);finishedTask.appendChild(listItem),bindTasks(listItem,unfinishedTask)}